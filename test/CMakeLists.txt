file(GLOB sources "*.hpp" "*.cpp" "observable/*" "source/*" "sink/*")
file(GLOB_RECURSE headers "../silicium/*.hpp")
if(LUA51_FOUND)
	file(GLOB luaSources "lua/*.cpp")
endif()
if(ZLIB_FOUND)
	file(GLOB zlibSources "zlib/*.cpp")
endif()
if(URIPARSER_FOUND)
	file(GLOB uriSources "uri/*.cpp")
endif()
if(NOT (Boost_VERSION LESS 105300))
	file(GLOB cBindingSources "c_binding/*.cpp")
endif()
add_executable(unit_test ${sources} ${luaSources} ${zlibSources} ${uriSources} ${cBindingSources} ${headers})
if(NOT (Boost_VERSION LESS 105300))
	target_link_libraries(unit_test siliciumc)
endif()
target_link_libraries(unit_test ${ZLIB_LIBRARY} ${URIPARSER_LIBRARIES} ${Boost_LIBRARIES})
if(SILICIUM_LINUX)
	target_link_libraries(unit_test dl)
endif()
